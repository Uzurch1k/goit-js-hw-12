{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// ===============================================================\n\nexport function templateGallery(dataGallery) {\n  return dataGallery\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n      </a>\n      <ul class=\"specific-list\">\n        <li class=\"specific-item\">\n          <p class=\"specific-text\">Likes</p>\n          <p class=\"specific-quantity\">${likes}</p>\n        </li>\n        <li class=\"specific-item\">\n          <p class=\"specific-text\">Views</p>\n          <p class=\"specific-quantity\">${views}</p>\n        </li>\n        <li class=\"specific-item\">\n          <p class=\"specific-text\">Comments</p>\n          <p class=\"specific-quantity\">${comments}</p>\n        </li>\n        <li class=\"specific-item\">\n          <p class=\"specific-text\">Downloads</p>\n          <p class=\"specific-quantity\">${downloads}</p>\n        </li>\n      </ul>\n    </li>`;\n      }\n    )\n    .join('');\n}\n\n// ===============================================================\n","// ===============================================================\n\nimport axios from 'axios';\n\n// ===============================================================\n\nexport async function searchGallery(request, currentPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n\n  const url = BASE_URL + END_POINT;\n\n  const params = {\n    key: '42127236-8bfdbbfbeed8a2dadaca720e8',\n    q: request,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page: currentPage,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n\n// ===============================================================\n","// ===============================================================\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ===============================================================\n\nimport { templateGallery } from './js/render-functions';\nimport { searchGallery } from './js/pixabay-api';\n\nconst lightbox = new SimpleLightbox('.gallery-list a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\n// ===============================================================\n\nconst optionsIziToastWarning = {\n  message: 'Please fill out the input field.',\n  backgroundColor: '#FFA000',\n  titleColor: '#fff',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  position: 'topRight',\n  timeout: 3000,\n  progressBar: false,\n};\n\nconst optionsIziToastError = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  backgroundColor: '#EF4040',\n  titleColor: '#fff',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  position: 'topRight',\n  timeout: 3000,\n  progressBar: false,\n  maxWidth: 400,\n};\n\nconst optionsIziToastInfo = {\n  message: \"We're sorry, but you've reached the end of search results.\",\n  titleColor: '#fff',\n  titleSize: '16px',\n  titleLineHeight: '1.5',\n  messageColor: '#fff',\n  messageSize: '16px',\n  messageLineHeight: '1.5',\n  position: 'topRight',\n  timeout: 3000,\n  progressBar: false,\n  maxWidth: 350,\n};\n\n// ===============================================================\n\nconst refs = {\n  form: document.querySelector('.gallery-form'),\n  loader: document.querySelector('.loader'),\n  gallery: document.querySelector('.gallery-list'),\n  btnLoadMore: document.querySelector('.gallery-load-more'),\n  scrollToTopBtn: document.querySelector('.scroll-up'),\n};\n\nlet text = '';\nlet page = 1;\nconst perPage = 15;\n\n// ===============================================================\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onLoadMoreClick);\n\n// ===============================================================\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  text = e.target.elements.text.value.trim();\n\n  if (!text) {\n    e.target.reset();\n    iziToast.warning(optionsIziToastWarning);\n    return;\n  }\n\n  refs.gallery.innerHTML = '';\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const data = await searchGallery(text, page);\n    if (data.hits.length === 0) {\n      iziToast.warning(optionsIziToastError);\n      hideLoader();\n      e.target.reset();\n      return;\n    }\n    renderGallery(data.hits);\n    if (data.totalHits <= perPage) {\n      hideLoadMore();\n    } else {\n      showLoadMore();\n    }\n  } catch (err) {\n    console.error('Error loading data:', err);\n  }\n\n  hideLoader();\n  e.target.reset();\n}\n\n// ===============================================================\n\nasync function onLoadMoreClick() {\n  page += 1;\n  hideLoadMore();\n  showLoader();\n\n  const data = await searchGallery(text, page);\n  const maxPage = Math.ceil(data.totalHits / perPage);\n\n  if (page >= maxPage) {\n    iziToast.info(optionsIziToastInfo);\n    hideLoadMore();\n    hideLoader();\n    return;\n  }\n\n  renderGallery(data.hits);\n\n  const height = refs.gallery.firstElementChild.getBoundingClientRect().height;\n  window.scrollBy({ top: height * 3, behavior: 'smooth' });\n\n  hideLoader();\n  showLoadMore();\n}\n\n// ===============================================================\n\nfunction renderGallery(dataGallery) {\n  const markup = templateGallery(dataGallery);\n  refs.gallery.insertAdjacentHTML('beforeend', markup);\n\n  lightbox.refresh();\n}\n\n// ===============================================================\n\nfunction showLoader() {\n  refs.loader.classList.add('in-active');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.remove('in-active');\n}\n\n// ===============================================================\n\nfunction showLoadMore() {\n  refs.btnLoadMore.classList.add('in-active');\n}\n\nfunction hideLoadMore() {\n  refs.btnLoadMore.classList.remove('in-active');\n}\n\n// ===============================================================\n\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 120) {\n    refs.scrollToTopBtn.classList.add('show');\n  } else {\n    refs.scrollToTopBtn.classList.remove('show');\n  }\n});\n\nrefs.scrollToTopBtn.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\n// ===============================================================\n"],"names":["templateGallery","dataGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","searchGallery","request","currentPage","url","params","axios","lightbox","SimpleLightbox","optionsIziToastWarning","optionsIziToastError","optionsIziToastInfo","refs","text","page","perPage","onFormSubmit","onLoadMoreClick","e","iziToast","hideLoadMore","showLoader","data","hideLoader","renderGallery","showLoadMore","err","maxPage","height","markup"],"mappings":"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"}